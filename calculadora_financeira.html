<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
</head>
<body style="color: brown; background-color: rgb(239, 240, 231);">
    <h1>Quanto você pode perder não controlando a umidade do seu Compost Barn e deixando suas vacas leiteiras doentes?</h1>

    <h3>Uma vaca saudável produz em média por semana:<br>
        - 315L no primeiro lote; <br>
        - 262.5L no segundo lote; <br>
        - 126L no terceiro lote; <br></h3>

    Quantidade de vacas no CB: <br>
    <input id="input_vacas" type="number"><br><br>

    Quantidade de vacas doentes no primeiro lote de lactação: <br>
    <input id="input_lote1" type="text"> <br><br>

    Quantidade de vacas doentes no segundo lote de lactação: <br>
    <input id="input_lote2" type="text"> <br><br>

    Quantidade de vacas doentes no terceiro lote de lactação: <br>
    <input id="input_lote3" type="text"> <br><br>

    Preço do litro do leite atual: <br>
    <input id="input_preco_leite" type="number"> <br><br> 

    <button onclick="calcular()">Calcular</button>
    <br>

    <div id="div_mensagem"></div>
    
</body>
</html>

<script>
    // criação das variáveis
    var vacas = 0;
    var vacas_doentes = 0;
    var lote1 = 0;
    var lote2 = 0;
    var lote3 = 0;
    var preco_leite = 0;
    var porcentagem_vacas_doentes = 0;
    

    //função acionada ao clicar no botão
    function calcular(){
        //captação das informações inseridas pelo usuário
        vacas = Number(input_vacas.value);
        lote1 = Number(input_lote1.value);
        lote2 = Number(input_lote2.value);
        lote3 = Number(input_lote3.value);
        preco_leite = Number(input_preco_leite.value);

        //cálculo das vacas doentes e da porcentagem de vacas doentes entre as sadias
        vacas_doentes = lote1 + lote2 + lote3;
        porcentagem_vacas_doentes = (vacas_doentes/vacas) * 100;

        //criação das variáveis de mensagem
        var mensagem = "";
        var mensagem_porcentagem = `${porcentagem_vacas_doentes}%`;

        //caso a porcentagem seja maior que 10, a mensagem mudará para 'Atenção!'
        if (porcentagem_vacas_doentes > 10) {
            mensagem = `<h3 style="color:red;"> Atenção! </h3>`;
            mensagem_porcentagem = `<span style="color:red;">${porcentagem_vacas_doentes}%</span>`;
        }

        //caso a porcentagem seja maior que 20, a mensagem mudará para 'Perigo!'
        if (porcentagem_vacas_doentes > 20) {
            mensagem = ` <h3 style="color:red;">Perigo! </h3>`;
            mensagem_porcentagem = `<span style="color:red;">${porcentagem_vacas_doentes}%</span>`;
        }
        
        //cálculo de quantidade de litros e lucro ideal da produção
        var litros_ideal = ((315 + 262.5 + 126)/3) * vacas;

        var lucro_ideal = litros_ideal * preco_leite;

        //cálculo de quantidade de litros e lucro perdidos por conta da mastite na produção
        var litros_perdidos = (lote1 * 315) + (lote2 * 262.5) + (lote3 * 126);
        var lucro_perdido = litros_perdidos * preco_leite;

        //estruturação da mensagem de acordo + perda na produção
        mensagem = mensagem + `<h3>Com ${lote1} vacas no primeiro lote, ${lote2} no segundo lote e ${lote3} no terceiro lote doentes, seu Compost Barn está com um <b><i>total de ${vacas_doentes} vacas doentes, sendo ${mensagem_porcentagem}</i></b> do total de vacas no seu Compost Barn! <br><br>
        Caso todas as suas ${vacas} vacas estivessem saudáveis, a produção seria de, considerando que temos quantidades iguais de vacas nos 3 lotes, <span style="color:green;">${litros_ideal}L</span> por semana, dando um lucro de <span style="color:green;">R$${lucro_ideal}</span>.<br><br>
        Sua produção foi reduzida em <span style="color:red;">${litros_perdidos}L</span> e está perdendo <span style="color:red;">R$${lucro_perdido}</span> em 1 semana.</h3>`;

        // caso não tenha nenhuma vaca doente no Compost Barn, esta será a mensagem exibida
        if (porcentagem_vacas_doentes == 0) {
            mensagem = `Parabéns! Seu Compost Barn está seguro.
            Como todas as suas ${vacas} vacas estão saudáveis, sua produção deve ser de, considerando que temos quantidades iguais de vacas nos 3 lotes, <b style="color:green;">${litros_ideal}L</b> por semana, dando um lucro de <b style="color:green;">R$${lucro_ideal}</b>.`;
        }

        //caso a inserção de dados seja inválida, será informado ao usuário
        if (porcentagem_vacas_doentes > 100) {
            mensagem = `<b style="color:red">Entrada inválida. </b>
            <br>
            Você tem mais vacas doentes do que vacas no Compost Barn. 
            <b style="color:darkgoldenrod">Revise.</b>`;
        }

        // caso o preço do leite inserido seja igual a 0
        if (preco_leite == 0) {
            mensagem = `<b style="color:red">Entrada inválida. </b>
            <br>
            Preço do leite tem que ser maior 0. 
            <b style="color:darkgoldenrod">Revise.</b>`
        }
        //exibição da mensagem na tela
        div_mensagem.innerHTML = mensagem;
    }
</script>
