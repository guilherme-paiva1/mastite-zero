<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
</head>
<body style="color: brown; background-color: beige;">
    <h1>Quanto você pode perder não controlando a umidade do seu Compost Barn e deixando suas vacas leiteiras doentes?</h1>

    Quantidade de vacas no CB: <br>
    <input id="input_vacas" type="number"><br><br>

    Quantidade de vacas doentes no primeiro lote de lactação: <br>
    <input id="input_lote1" type="text"> <br><br>

    Quantidade de vacas doentes no segundo lote de lactação: <br>
    <input id="input_lote2" type="text"> <br><br>

    Quantidade de vacas doentes no terceiro lote de lactação: <br>
    <input id="input_lote3" type="text"> <br><br>

    Preço do litro do leite atual: <br>
    <input id="input_preco_leite" type="number"> <br><br> 

    <button onclick="calcular()">Calcular</button>
    <br>

    <div id="div_mensagem"></div>
    
</body>
</html>

<script>
    // criação das variáveis
    var vacas = 0;
    var vacas_doentes = 0;
    var lote1 = 0;
    var lote2 = 0;
    var lote3 = 0;
    var preco_leite = 0;
    var porcentagem_vacas_doentes = 0;
    

    //função acionada ao clicar no botão
    function calcular(){
        //captação das informações inseridas pelo usuário
        vacas = Number(input_vacas.value);
        lote1 = Number(input_lote1.value);
        lote2 = Number(input_lote2.value);
        lote3 = Number(input_lote3.value);
        preco_leite = Number(input_preco_leite.value);


        //cálculo das vacas doentes e da porcentagem de vacas doentes entre as sadias
        vacas_doentes = lote1 + lote2 + lote3;
        porcentagem_vacas_doentes = (vacas_doentes/vacas) * 100;

        //criação das variáveis de mensagem
        var mensagem = "";
        var mensagem_porcentagem = "";

        //caso a porcentagem seja maior que 10, a mensagem mudará para 'Atenção!'
        if (porcentagem_vacas_doentes > 10) {
            mensagem = "Atenção! ";
            mensagem_porcentagem = `<b style="color:darkgoldenrod;">${porcentagem_vacas_doentes}%</b>`;
        }

        //caso a porcentagem seja maior que 20, a mensagem mudará para 'Perigo!'
        if (porcentagem_vacas_doentes > 20) {
            mensagem = "Perigo! ";
            mensagem_porcentagem = `<b style="color:red;">${porcentagem_vacas_doentes}%</b>`;
        }
        
        //cálculo de quantidade de litros e lucro ideal da produção
        var litros_ideal = ((315 + 262.5 + 126)/3) * vacas;
        var lucro_ideal = litros_ideal * preco_leite;

        //cálculo de quantidade de litros e lucro perdidos por conta da mastite na produção
        var litros_perdidos = (lote1 * 315) + (lote2 * 262.5) + (lote3 * 126);
        var lucro_perdido = litros_perdidos * preco_leite;

        //estruturação da mensagem de acordo + perda na produção
        mensagem = mensagem + `Com ${lote1} vacas no primeiro lote, ${lote2} no segundo lote e ${lote3} no terceiro lote doentes, seu Compost Barn está com um total de ${vacas_doentes} vacas doentes, sendo ${mensagem_porcentagem} do total de vacas no seu Compost Barn! <br><br>
        Vacas saudáveis produzem em média por semana: <br>
        - 315L no primeiro lote; <br>
        - 262.5L no segundo lote; <br>
        - 126L no terceiro lote; <br>
        Sua produção foi reduzida em <b style="color:red;">${litros_perdidos}L</b> e está perdendo <b style="color:red;">R$${lucro_perdido}</b> em 1 semana. <br><br>
        Caso todas as suas ${vacas} estivessem saudáveis a produção seria de, considerando que temos quantidades iguais de vacas nos 3 lotes, <b style="color:blue;">${litros_ideal}L</b> por semana, dando um lucro de <b style="color:blue;">R$${lucro_ideal}</b>.`;

        //caso a inserção de dados seja inválida, será informado ao usuário
        if (porcentagem_vacas_doentes > 100) {
            mensagem = "Entrada inválida. Você tem mais vacas doentes do que vacas no Compost Barn. Revise.";
        }

        //exibição da mensagem na tela
        div_mensagem.innerHTML = mensagem;
    }
</script>
